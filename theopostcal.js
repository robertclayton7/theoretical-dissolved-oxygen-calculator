var holdit = 500; $(document).ready(function() { $("#cleario").click(function(){ clearioNow(); }); $("#INP_C").change(function() { setCorrPressure(); if($("#INP_T").val().trim().length != 0) { setTheoDO(); } }); $("#INP_T").change(function(){ setTheoDO(); }); $("#answer").click(function(){ setTheoDO(); }); $("#submitit").click(function(){ setTheoDO(); }); $("#cleario").click(); }); /* function  set clearioNow */ function clearioNow() { $("#INP_C").val(holdit); $("#INP_P").val(""); $("#INP_T").val(""); $("#answer").val("").attr("placeholder", "Calculated"); $("#errelev").hide(); $("#errpress").hide(); $("#errtemp").hide(); getServerStatus(); setCorrPressure(); } /* function  checkinput */ function checkinput() { retval = true; if ( $("#INP_C").val().length == 0 || $("#INP_C").val() < 0 || $("#INP_C").val() > 21000) { $("#errelev").show(); retval = false; } else { $("#errelev").hide(); } if ( $("#INP_P").val().length == 0 || $("#INP_P").val() == "Pressure Error") { $("#errpress").show(); retval = false; } else { $("#errpress").hide(); } if ($("#INP_T").val().length == 0 || parseFloat($("#INP_T").val()) < 0 || parseFloat($("#INP_T").val()) > 50 ) { $("#errtemp").show(); retval = false; } else { $("#errtemp").hide(); } return retval; } /* function  setCorrPressure */ function setCorrPressure() { var success = false; var opts = 'action=corrpressure&elev='+$("#INP_C").val(); var pstatus = '/theopostcal/?'+opts; var retval = $.getJSON(pstatus) .done(function(data){ $("#INP_P").val(data.CorrPressureTorr); });
} /* function getServerStatus */  function getServerStatus() { var success = false; var opts = 'action=serverstatus'; var pstatus = '/theopostcal/?'+opts; var retval = $.getJSON(pstatus) .done(function(data){ success = true; statusclass = data.STATUS.toLowerCase(); $("#INP_S").removeClass().addClass(statusclass); $("#INP_S").val(data.STATUSMSG); $("#INP_P").attr("placeholder", "Calculated"); }); } /* function  set theodo */ function setTheoDO() { var success = false; if(checkinput()) { var opts = 'action=calcdo&elev='+$("#INP_C").val()+'&temp='+$("#INP_T").val(); var pstatus = '/theopostcal/?'+opts; var retval = $.getJSON(pstatus) .done(function(data){ success = true; $("#answer").val(data.THEODO); }); } }
